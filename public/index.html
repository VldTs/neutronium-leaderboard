<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Neutronium Expansion - Global Leaderboard</title>
  <meta name="description" content="Track your Neutronium scores across 13 universe levels. Join the global leaderboard!">
  <link rel="stylesheet" href="/css/styles.css">
  <link rel="manifest" href="/manifest.json">
  <meta name="theme-color" content="#0a0e17">
</head>
<body>
  <header class="header">
    <div class="container header-content">
      <a href="/" class="logo">
        <div class="logo-icon"></div>
        <span>Neutronium</span>
      </a>
      <nav class="nav">
        <a href="/" class="active">Home</a>
        <a href="/leaderboard.html">Leaderboard</a>
        <a href="/profile.html" id="nav-profile">Profile</a>
      </nav>
    </div>
  </header>

  <main class="container">
    <!-- Hero Section -->
    <section class="hero">
      <div class="hero-glow"></div>
      <h1>Neutronium Expansion</h1>
      <p class="hero-subtitle">Global Progress Journal</p>
      <p class="hero-description">Track your scores, compete with friends, and climb the leaderboard across 13 universe levels</p>
    </section>

    <!-- Active Session Banner (shown when player has active session) -->
    <div id="active-session-banner" class="active-session-banner hidden">
      <div class="active-session-banner-content">
        <div class="active-session-banner-icon">&#127918;</div>
        <div class="active-session-banner-info">
          <strong>You have an active game!</strong>
          <p>Level <span id="banner-level">-</span> &bull; Box <span id="banner-box">-</span></p>
        </div>
        <a id="btn-rejoin-session" href="#" class="btn btn-primary">
          <span>Rejoin</span>
          <span class="btn-icon">&#8594;</span>
        </a>
      </div>
    </div>

    <!-- Box Entry Section -->
    <div id="box-entry" class="card card-glow" style="max-width: 480px; margin: 0 auto;">
      <!-- Step Indicator -->
      <div class="step-indicator">
        <div class="step active" id="step-1">
          <span class="step-number">1</span>
          <span class="step-label">Enter Box</span>
        </div>
        <div class="step-line"></div>
        <div class="step" id="step-2">
          <span class="step-number">2</span>
          <span class="step-label">Setup</span>
        </div>
        <div class="step-line"></div>
        <div class="step" id="step-3">
          <span class="step-number">3</span>
          <span class="step-label">Play</span>
        </div>
      </div>

      <div id="box-loading" class="loading hidden">
        <div class="spinner"></div>
        <p class="text-muted mt-md">Checking box...</p>
      </div>

      <!-- Step 1: Enter Box ID -->
      <div id="box-form">
        <div class="form-group">
          <label class="form-label" for="box-id">
            <span class="form-label-icon">&#128230;</span>
            Box ID
          </label>
          <input
            type="text"
            id="box-id"
            class="form-input form-input-lg"
            placeholder="NE-2026-00001"
            pattern="NE-\d{4}-\d{5}"
            autocomplete="off"
          >
          <p class="form-hint">Find the code on your game box or scan the QR code</p>
        </div>
        <button type="button" id="btn-check-box" class="btn btn-primary btn-lg btn-block">
          <span>Check Box</span>
          <span class="btn-icon">&#8594;</span>
        </button>
      </div>

      <!-- Box Not Found - Register -->
      <div id="box-not-found" class="hidden">
        <div class="alert alert-warning">
          <span class="alert-icon">&#9888;</span>
          <div>
            <strong>New Box Detected</strong>
            <p>This box isn't registered yet. Let's set it up!</p>
          </div>
        </div>
        <div class="form-group">
          <label class="form-label" for="register-email">
            <span class="form-label-icon">&#9993;</span>
            Email (optional)
          </label>
          <input type="email" id="register-email" class="form-input" placeholder="For account recovery">
        </div>
        <button type="button" id="btn-register-box" class="btn btn-primary btn-lg btn-block">
          <span>Register Box</span>
          <span class="btn-icon">&#10003;</span>
        </button>
      </div>

      <!-- Box Found -->
      <div id="box-found" class="hidden">
        <div class="alert alert-success">
          <span class="alert-icon">&#10003;</span>
          <div>
            <strong>Box Ready!</strong>
            <p id="box-status-text">Ready to start a new game.</p>
          </div>
        </div>

        <!-- Start New Session -->
        <div id="start-session" class="hidden">
          <div class="form-group">
            <label class="form-label" for="player-name">
              <span class="form-label-icon">&#128100;</span>
              Your Name
            </label>
            <input type="text" id="player-name" class="form-input" placeholder="Enter your name" maxlength="50">
          </div>

          <div class="form-group">
            <label class="form-label">
              <span class="form-label-icon">&#127912;</span>
              Your Figure Color
            </label>
            <input type="hidden" id="player-color" value="">
            <div class="color-picker-labeled">
              <button type="button" class="color-btn-labeled" data-color="gray">
                <span class="color-swatch" style="background: #6b7280;"></span>
                <span class="color-name">Gray</span>
              </button>
              <button type="button" class="color-btn-labeled" data-color="pink">
                <span class="color-swatch" style="background: #ec4899;"></span>
                <span class="color-name">Pink</span>
              </button>
              <button type="button" class="color-btn-labeled" data-color="purple">
                <span class="color-swatch" style="background: #8b5cf6;"></span>
                <span class="color-name">Purple</span>
              </button>
              <button type="button" class="color-btn-labeled" data-color="green">
                <span class="color-swatch" style="background: #22c55e;"></span>
                <span class="color-name">Green</span>
              </button>
            </div>
          </div>

          <div class="form-group">
            <label class="form-label" for="universe-level">
              <span class="form-label-icon">&#127759;</span>
              Universe Level
            </label>
            <select id="universe-level" class="form-input form-select">
              <option value="1">Level 1 - Basic</option>
            </select>
          </div>

          <button type="button" id="btn-start-session" class="btn btn-primary btn-lg btn-block">
            <span>Start New Game</span>
            <span class="btn-icon">&#9654;</span>
          </button>
        </div>

        <!-- Join Existing Session -->
        <div id="join-session" class="hidden">
          <div class="active-session-info">
            <div class="session-badge">
              <span class="session-badge-icon">&#127918;</span>
              <span>Game in Progress</span>
            </div>
            <div class="session-details">
              <div class="session-detail">
                <span class="detail-label">Level</span>
                <span class="detail-value" id="active-level">-</span>
              </div>
              <div class="session-detail">
                <span class="detail-label">Players</span>
                <span class="detail-value" id="active-players">-</span>
              </div>
            </div>
          </div>

          <div class="form-group">
            <label class="form-label" for="join-player-name">
              <span class="form-label-icon">&#128100;</span>
              Your Name
            </label>
            <input type="text" id="join-player-name" class="form-input" placeholder="Enter your name" maxlength="50">
          </div>

          <div class="form-group">
            <label class="form-label">
              <span class="form-label-icon">&#127912;</span>
              Your Figure Color
            </label>
            <input type="hidden" id="join-player-color" value="">
            <div class="color-picker-labeled" id="join-color-picker">
              <button type="button" class="color-btn-labeled" data-color="gray">
                <span class="color-swatch" style="background: #6b7280;"></span>
                <span class="color-name">Gray</span>
              </button>
              <button type="button" class="color-btn-labeled" data-color="pink">
                <span class="color-swatch" style="background: #ec4899;"></span>
                <span class="color-name">Pink</span>
              </button>
              <button type="button" class="color-btn-labeled" data-color="purple">
                <span class="color-swatch" style="background: #8b5cf6;"></span>
                <span class="color-name">Purple</span>
              </button>
              <button type="button" class="color-btn-labeled" data-color="green">
                <span class="color-swatch" style="background: #22c55e;"></span>
                <span class="color-name">Green</span>
              </button>
            </div>
          </div>

          <button type="button" id="btn-join-session" class="btn btn-primary btn-lg btn-block">
            <span>Join Game</span>
            <span class="btn-icon">&#8594;</span>
          </button>
        </div>
      </div>

      <!-- Error State -->
      <div id="box-error" class="hidden">
        <div class="alert alert-error">
          <span class="alert-icon">&#10060;</span>
          <div>
            <strong>Something went wrong</strong>
            <p id="error-message">Please try again.</p>
          </div>
        </div>
        <button type="button" id="btn-retry" class="btn btn-secondary btn-block">
          <span>Try Again</span>
        </button>
      </div>
    </div>

    <!-- Leaderboard Preview -->
    <section class="leaderboard-section mt-2xl" style="margin: 8rem 6rem;">
      <div class="section-header">
        <h2>
          <span class="section-icon">&#127942;</span>
          Top Players
        </h2>
        <a href="/leaderboard.html" class="btn btn-ghost btn-sm">View All</a>
      </div>
      <div id="leaderboard-preview" class="card">
        <div class="loading">
          <div class="spinner"></div>
        </div>
      </div>
    </section>

    <!-- How It Works -->
    <section class="how-it-works mt-2xl">
      <h2 class="text-center mb-lg">
        <span class="section-icon">&#128161;</span>
        How It Works
      </h2>
      <div class="features-grid">
        <div class="feature-card">
          <div class="feature-icon">&#128230;</div>
          <h3>1. Scan Your Box</h3>
          <p>Enter your game box ID or scan the QR code to get started</p>
        </div>
        <div class="feature-card">
          <div class="feature-icon">&#127918;</div>
          <h3>2. Play Together</h3>
          <p>Start a session and invite friends to join your game</p>
        </div>
        <div class="feature-card">
          <div class="feature-icon">&#127942;</div>
          <h3>3. Track Progress</h3>
          <p>Submit scores and climb the global leaderboard</p>
        </div>
      </div>
    </section>
  </main>

  <footer class="footer">
    <div class="container">
      <p>Neutronium Expansion &copy; 2026</p>
    </div>
  </footer>

  <script src="/js/auth.js"></script>
  <script src="/js/app.js"></script>
</body>
</html>